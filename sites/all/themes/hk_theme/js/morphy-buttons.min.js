(function(e){(function h(e,c,n){function a(l,g){if(!c[l]){if(!e[l]){var k="function"==typeof require&&require;if(!g&&k)return k(l,!0);if(b)return b(l,!0);throw Error("Cannot find module '"+l+"'");}k=c[l]={d:{}};e[l][0].call(k.d,function(b){var k=e[l][1][b];return a(k?k:b)},k,k.d,h,e,c,n)}return c[l].d}for(var b="function"==typeof require&&require,k=0;k<n.length;k++)a(n[k]);return a})({1:[function(e,m){m.d=function(c){c=c.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(c,a,b,k){return a+a+b+b+
k+k});return(c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c))?{G:parseInt(c[1],16),B:parseInt(c[2],16),A:parseInt(c[3],16)}:null}},{}],2:[function(e,m){var c=null;m.d=function(){if(null===c){var e=document.createElement("p").style;c="transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"OTransition"in e}return!1}},{}],3:[function(h,m,c){var n=this.l||function(a,b){function f(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);f.prototype=b.prototype;
a.prototype=new f},a=h("./core/a"),b=h("./element-state");m=h("./core/observable");var k=h("./overlay"),l=h("./core/css-animation"),g=h("./core/css-transition"),r=h("./browser/is-supports-transitions")();h=function(c){function p(f){c.call(this);this.n=200;this.r=!1;var d=this;d.control=f;d.id=d.control.attr("id");d.id||(d.id=a.uniqueId("morph_"),d.control.attr("id",d.id));d.b=parseFloat(d.control.data("duration"))||500;if(-1==a.indexOf([50,75,100,150,200,250,500,750,1E3,1250,1500,1750,2E3,2500,3E3,
4E3,5E3],d.b))throw Error("Invalid data-duration = "+d.b+" attribute value!");d.I=d.control.data("tf-in")||"easeIn";d.J=d.control.data("tf-out")||"easeOut";d.r=d.control.data("body-mode")||!1;var b=f.children(".morph-overlay");b.length&&(d.f=new k.w(b),d.f.on("click",function(){d.close()}));d.a=f.children(".morph-container");d.content=d.a.children().not(".morph-close").not("script");d.content.addClass("morph-content morph-content-hidden");d.i=e(".morph-close",d.a);d.i.on("click",function(f){f.preventDefault();
f.stopPropagation();d.close()});d.r&&(d.e=e("<div/>",{"class":"morph-control"}),d.e.appendTo("body"),d.a.detach().appendTo(d.e));(d.button=f.children(".morph-button")).on("click",a.bind(d.F,d));d.H()}n(p,c);p.prototype.q=function(){var f={},d=this.button[0].getBoundingClientRect();f.left=d.left+"px";f.top=d.top+"px";f.width=(void 0===d.width?this.button.outerWidth(!0):d.width)+"px";f.height=(void 0===d.height?this.button.outerHeight(!0):d.height)+"px";return f};p.prototype.C=function(){var f=0,d=
0;this.a.children(".morph-content").each(function(){var a=e(this).outerWidth(!0);a>d&&(d=a);f+=e(this).outerHeight(!0)});return{height:f,width:d}};p.prototype.H=function(){this.g=b.t(this.button);this.h=b.t(this.a)};p.prototype.F=function(){this.control.is(".morph-opened,.morph-opening")?(e("body").off("."+this.id),this.close()):(e("body").off("."+this.id).on("click."+this.id+" touchstart."+this.id,a.bind(this.close,this)),this.open())};p.prototype.k=function(){var f=this;f.e&&f.e.removeClass("morph-opened morph-opening");
f.control.removeClass("morph-opened morph-opening");return{addClass:function(a){f.e&&f.e.addClass(a);f.control.addClass(a)}}};p.prototype.p=function(f){var d=this,b=e.Deferred(),k=0;if(f){d.i.addClass("morph-close-show");var c=d.content,g=0;a.each(c,function(f,a){var d=e(f),b=parseInt(d.data("delay-in"),10)||0;g+=b;a==c.length-1&&(g+=parseInt(d.data("duration-in"),10)||500)});a.each(c,function(f){var a=e(f),d=a.data("animation-in")||"fadeInDown",b=a.data("duration-in")||500;f=parseInt(a.data("delay-in"),
10)||0;k+=f;a.data("appearTimeout")&&clearTimeout(a.data("appearTimeout"));a.data("appearTimeout",setTimeout(function(){a.removeClass("morph-content-hidden");l(a,["morph-content-animate-"+b+"ms",d].join(" "))},k))});setTimeout(b.resolve,g-0)}else d.i.removeClass("morph-close-show"),c=e(d.content.get().reverse()),g=0,a.each(c,function(f,a){var d=e(f),b=parseInt(d.data("delay-out"),10)||0;g+=b;a==c.length-1&&(g+=parseInt(d.data("duration-out"),10)||500)}),a.each(c,function(f){var a=e(f),d=a.data("animation-out")||
"fadeOutDown",b=parseInt(a.data("duration-out"),10)||500;f=parseInt(a.data("delay-out"),10)||0;k+=f;a.data("appearTimeout")&&clearTimeout(a.data("appearTimeout"));a.data("appearTimeout",setTimeout(function(){l(a,["morph-content-animate-"+b+"ms",d].join(" "),function(){a.addClass("morph-content-hidden")})},k))}),setTimeout(function(){d.content.addClass("morph-content-hidden");b.resolve()},g+0);return b.promise()};p.prototype.o=function(a){var d=e.Deferred();this.m&&clearTimeout(this.m);r?(a?this.button.removeClass("morph-button-animate-hide"):
this.button.addClass("morph-button-animate morph-button-animate-hide"),this.m=setTimeout(d.resolve,this.n)):this.button.animate({opacity:a?1:0},this.n,d.resolve);return d.promise()};p.prototype.s=function(f){function d(){}var b=this,c=e.Deferred();if(f){f=b.a.data("width")||"";var k="%"==(f+"").slice(-1),l=b.a.data("height")||"",p="%"==(l+"").slice(-1),h=b.a.data("padding")||"",n=b.a.data("padding-left")||h,m=b.a.data("padding-right")||h,s=b.a.data("padding-top")||h,t=b.a.data("padding-bottom")||
h;a.each(b.content,function(a,f){var d=e(a);""!=n&&d.css("padding-left",n);""!=m&&d.css("padding-right",m);""!=s&&0==f&&d.css("padding-top",s);""!=t&&f==b.content.length-1&&d.css("padding-bottom",t)});f&&!k&&(b.content.css("min-width",f-n-m),b.content.css("width",f-n-m));var h=b.C(),v=e(window).innerWidth(),u=e(window).innerHeight();f&&!k&&(h.width=parseFloat(f));l&&!p&&(h.height=parseFloat(l));var q={};k?(f=parseFloat(f),q.left=(100-f)/2+"%",q.width=f+"%"):(q.left=(v-h.width)/2,q.width=h.width);
p?(l=parseFloat(l),q.top=(100-l)/2+"%",q.height=l+"%"):(q.top=(u-h.height)/2,q.height=h.height);u<h.height&&(q.top=0,q.height="100%",d=function(){e("body").addClass("morph-body-overflow-hide");b.a.css("overflowY","auto")});q=a.extend(q,b.g.j(b.h));r?g(b.a,q,"morph-container-animate-"+b.b+"ms"):b.a.animate(q,b.b,b.I);setTimeout(d,b.b);setTimeout(c.resolve,b.b);b.f&&b.f.show()}else e("body").removeClass("morph-body-overflow-hide"),b.a.css("overflowY","hidden"),f=b.q(),f=a.extend(f,b.h.j(b.g)),r?g(b.a,
f,"morph-container-animate-"+b.b+"ms",c.resolve):b.a.animate(f,b.b,b.J,c.resolve),b.f&&b.f.hide();return c.promise()};p.prototype.open=function(){var b=this;e(".morph-opened,.morph-opening").each(function(b,a){var d=e(a).data("morph");d&&d.close()});b.k().addClass("morph-opening");b.control.trigger("before-open");var d=b.q();b.a.css(a.extend(d,{position:"fixed"},b.h.j(b.g)));b.o(!1).then(function(){return b.s(!0)}).then(function(){return b.p(!0)}).then(function(){b.k().addClass("morph-opened");b.control.trigger("after-open")})};
p.prototype.close=function(b){var a=this;!a.control.is(".morph-opened,.morph-opening")||b&&e(b.target).parents(".morph-control").length||(a.control.trigger("before-close"),a.a.stop(),a.button.stop(),a.p(!1).then(function(){return a.s(!1)}).then(function(){return a.o(!0)}).then(function(){a.k();a.control.trigger("after-close")}))};return p}(m);c.u=h},{"./browser/is-supports-transitions":2,"./core/a":4,"./core/css-animation":5,"./core/css-transition":6,"./core/observable":7,"./element-state":8,"./overlay":11}],
4:[function(h,e){function c(){}var n={},a=Array.prototype,b=a.slice,k=a.forEach,l=a.indexOf,g=Function.prototype.bind,r=Object.prototype.toString,s=0,a=function(){function a(){}a.each=function(a,b,c){if(null==a)return a;if(k&&a.forEach===k)a.forEach(b,c);else if(a.length===+a.length)for(var g=0,l=a.length;g<l;g++){if(b.call(c,a[g],g,a)===n)return}else for(var l=_.keys(a),g=0,e=l.length;g<e;g++)if(b.call(c,a[l[g]],l[g],a)===n)return;return a};a.extend=function(f){for(var d=0;d<arguments.length-1;d++);
a.each(b.call(arguments,1),function(a){if(a)for(var b in a)f[b]=a[b]});return f};a.uniqueId=function(a){var b=++s+"";return a?a+b:b};a.indexOf=function(a,b,c){if(null==a)return-1;var g=0,k=a.length;if(c)if("number"==typeof c)g=0>c?Math.max(0,k+c):c;else return g=_.sortedIndex(a,b),a[g]===b?g:-1;if(l&&a.indexOf===l)return a.indexOf(b,c);for(;g<k;g++)if(a[g]===b)return g;return-1};a.isObject=function(a){return a===Object(a)};a.bind=function(f,d){var k,l;if(g&&f.bind===g)return g.apply(f,b.call(arguments,
1));if(!a.isFunction(f))throw new TypeError;k=b.call(arguments,2);return l=function(){if(!(this instanceof l))return f.apply(d,k.concat(b.call(arguments)));c.prototype=f.prototype;var a=new c;c.prototype=null;var g=f.apply(a,k.concat(b.call(arguments)));return Object(g)===g?g:a}};a.isFunction=function(a){return"[object Function]"==r.call(a)};a.format=function(a){for(var b=[],g=0;g<arguments.length-1;g++)b[g]=arguments[g+1];return a.replace(/\{\{|\}\}|\{(\d+)\}/g,function(a,g){return"{{"==a?"{":"}}"==
a?"}":b[g]})};return a}();e.d=a},{}],5:[function(e,m){m.d=function(c,e,a){c.addClass(e);c.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){a&&a();c.removeClass(e)})}},{}],6:[function(e,m){m.d=function(c,e,a,b){c.addClass(a);c.one("webkitTransitionEnd mozTransitionEnd MSTransitionEnd otransitionend transitionend",function(){b&&b();c.removeClass(a)});e&&c.css(e)}},{}],7:[function(h,m){var c=h("./a"),n=function(){function a(){}a.prototype.on=function(a,k,
l){function g(a,b,g){g&&(b=_.bind(b,g));e(h).on(a,b)}var h=this;c.isObject(a)?c.each(a,function(c,k){"scope"!=k&&g(k,c,a.scope)}):g.apply(h,arguments);return this};a.prototype.one=function(a,c,l){l&&(c=_.bind(c,l));e(this).one(a,c);return this};a.prototype.off=function(a){e(this).off(a);return this};a.prototype.trigger=function(a,c){e(this).trigger(a,c);return this};return a}();m.d=n},{"./a":4}],8:[function(e,m){var c=function(){function c(){}c.t=function(a){var b=new c;b.borderTopWidth=a.css("border-top-width");
b.borderTopStyle=a.css("border-top-style");b.borderTopColor=a.css("border-top-color");b.borderBottomWidth=a.css("border-bottom-width");b.borderBottomStyle=a.css("border-bottom-style");b.borderBottomColor=a.css("border-bottom-color");b.borderLeftWidth=a.css("border-left-width");b.borderLeftStyle=a.css("border-left-style");b.borderLeftColor=a.css("border-left-color");b.borderRightWidth=a.css("border-right-width");b.borderRightStyle=a.css("border-right-style");b.borderRightColor=a.css("border-right-color");
b.borderTopLeftRadius=a.css("border-top-left-radius");b.borderTopRightRadius=a.css("border-top-right-radius");b.borderBottomLeftRadius=a.css("border-bottom-left-radius");b.borderBottomRightRadius=a.css("border-bottom-right-radius");b.backgroundColor=a.css("background-color");return b};c.prototype.j=function(a){var b={};this.borderTopWidth!=a.borderTopWidth&&(b.borderTopWidth=a.borderTopWidth);this.borderTopStyle!=a.borderTopStyle&&(b.borderTopStyle=a.borderTopStyle);this.borderTopColor!=a.borderTopColor&&
(b.borderTopColor=a.borderTopColor);this.borderBottomWidth!=a.borderBottomWidth&&(b.borderBottomWidth=a.borderBottomWidth);this.borderBottomStyle!=a.borderBottomStyle&&(b.borderBottomStyle=a.borderBottomStyle);this.borderBottomColor!=a.borderBottomColor&&(b.borderBottomColor=a.borderBottomColor);this.borderLeftWidth!=a.borderLeftWidth&&(b.borderLeftWidth=a.borderLeftWidth);this.borderLeftStyle!=a.borderLeftStyle&&(b.borderLeftStyle=a.borderLeftStyle);this.borderLeftColor!=a.borderLeftColor&&(b.borderLeftColor=
a.borderLeftColor);this.borderRightWidth!=a.borderRightWidth&&(b.borderRightWidth=a.borderRightWidth);this.borderRightStyle!=a.borderRightStyle&&(b.borderRightStyle=a.borderRightStyle);this.borderRightColor!=a.borderRightColor&&(b.borderRightColor=a.borderRightColor);this.borderTopLeftRadius!=a.borderTopLeftRadius&&(b.borderTopLeftRadius=a.borderTopLeftRadius);this.borderTopRightRadius!=a.borderTopRightRadius&&(b.borderTopRightRadius=a.borderTopRightRadius);this.borderBottomLeftRadius!=a.borderBottomLeftRadius&&
(b.borderBottomLeftRadius=a.borderBottomLeftRadius);this.borderBottomRightRadius!=a.borderBottomRightRadius&&(b.borderBottomRightRadius=a.borderBottomRightRadius);this.backgroundColor!=a.backgroundColor&&(b.backgroundColor=a.backgroundColor);return b};return c}();m.d=c},{}],9:[function(h){var m=h("./initer");e(function(){e(".morph-control").each(function(){m.v.D(this)})})},{"./initer":10}],10:[function(h,m,c){var n=this.l||function(a,c){function e(){this.constructor=a}for(var g in c)c.hasOwnProperty(g)&&
(a[g]=c[g]);e.prototype=c.prototype;a.prototype=new e},a=h("./controller");h=function(b){function c(){b.apply(this,arguments)}n(c,b);c.D=function(b){b=e(b);var c=b.data("morph");c||(c=new a.u(b),b.data("morph",c))};return c}(h("./core/observable"));c.v=h},{"./controller":3,"./core/observable":7}],11:[function(e,m,c){var n=this.l||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c};m=e("./core/observable");var a=e("./browser/hex-to-rgb"),
b=e("./browser/is-supports-transitions")();e=function(c){function e(g){c.call(this);this.c=g;this.b=500;var h=this;h.c.on("click",function(a){h.trigger("click",a)});h.color=g.data("color")||"#000";h.opacity=parseFloat(g.data("opacity"))||0.5;b?(g=a(h.color),h.c.css({backgroundColor:"rgba("+[g.G,g.B,g.A,h.opacity].join()+")"}),h.c.addClass("morph-overlay-animate")):h.c.css({opacity:0,backgroundColor:h.color})}n(e,c);e.prototype.show=function(){b?this.c.addClass("morph-overlay-show"):(this.c.css("visibility",
"visible"),this.c.animate({opacity:this.opacity},this.b))};e.prototype.hide=function(){var a=this;b?a.c.removeClass("morph-overlay-show"):a.c.animate({opacity:0},a.b,function(){a.c.css("visibility","hidden")})};return e}(m);c.w=e},{"./browser/hex-to-rgb":1,"./browser/is-supports-transitions":2,"./core/observable":7}]},{},[9])})(jQuery);
